(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e77cf67c"],{"159b":function(t,n,e){var r=e("da84"),o=e("fdbc"),i=e("17c2"),c=e("9112");for(var a in o){var s=r[a],u=s&&s.prototype;if(u&&u.forEach!==i)try{c(u,"forEach",i)}catch(f){u.forEach=i}}},"17c2":function(t,n,e){"use strict";var r=e("b727").forEach,o=e("a640"),i=o("forEach");t.exports=i?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},"25f0":function(t,n,e){"use strict";var r=e("6eeb"),o=e("825a"),i=e("d039"),c=e("ad6d"),a="toString",s=RegExp.prototype,u=s[a],f=i((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),l=u.name!=a;(f||l)&&r(RegExp.prototype,a,(function(){var t=o(this),n=String(t.source),e=t.flags,r=String(void 0===e&&t instanceof RegExp&&!("flags"in s)?c.call(t):e);return"/"+n+"/"+r}),{unsafe:!0})},"2a6b":function(t,n,e){"use strict";e.d(n,"a",(function(){return o})),e.d(n,"b",(function(){return i}));var r=e("b775"),o=function(t){return r["a"].get("/v1_0/suggestion",{params:{q:t}})},i=function(t,n){return r["a"].get("/v1_0/search",{params:{q:t,page:n}})}},"44e7":function(t,n,e){var r=e("861d"),o=e("c6b6"),i=e("b622"),c=i("match");t.exports=function(t){var n;return r(t)&&(void 0!==(n=t[c])?!!n:"RegExp"==o(t))}},"4d63":function(t,n,e){var r=e("83ab"),o=e("da84"),i=e("94ca"),c=e("7156"),a=e("9bf2").f,s=e("241c").f,u=e("44e7"),f=e("ad6d"),l=e("9f7f"),h=e("6eeb"),g=e("d039"),p=e("69f3").enforce,d=e("2626"),v=e("b622"),b=v("match"),y=o.RegExp,w=y.prototype,m=/a/g,k=/a/g,x=new y(m)!==m,E=l.UNSUPPORTED_Y,S=r&&i("RegExp",!x||E||g((function(){return k[b]=!1,y(m)!=m||y(k)==k||"/a/i"!=y(m,"i")})));if(S){var R=function(t,n){var e,r=this instanceof R,o=u(t),i=void 0===n;if(!r&&o&&t.constructor===R&&i)return t;x?o&&!i&&(t=t.source):t instanceof R&&(i&&(n=f.call(t)),t=t.source),E&&(e=!!n&&n.indexOf("y")>-1,e&&(n=n.replace(/y/g,"")));var a=c(x?new y(t,n):y(t,n),r?this:w,R);if(E&&e){var s=p(a);s.sticky=!0}return a},_=function(t){t in R||a(R,t,{configurable:!0,get:function(){return y[t]},set:function(n){y[t]=n}})},C=s(y),O=0;while(C.length>O)_(C[O++]);w.constructor=R,R.prototype=w,h(o,"RegExp",R)}d("RegExp")},"510b":function(t,n,e){"use strict";e("a398")},7156:function(t,n,e){var r=e("861d"),o=e("d2bb");t.exports=function(t,n,e){var i,c;return o&&"function"==typeof(i=n.constructor)&&i!==e&&r(c=i.prototype)&&c!==e.prototype&&o(t,c),t}},a398:function(t,n,e){},a640:function(t,n,e){"use strict";var r=e("d039");t.exports=function(t,n){var e=[][t];return!!e&&r((function(){e.call(null,n||function(){throw 1},1)}))}},cb80:function(t,n,e){"use strict";e.r(n);var r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("div",{staticClass:"search-header"},[e("van-icon",{staticClass:"goback",attrs:{name:"arrow-left",color:"white",size:"18"},on:{click:function(n){return t.$router.back()}}}),e("van-search",{attrs:{placeholder:"请输入搜索关键词",background:"#007BFF",shape:"round"},on:{input:t.onInput},model:{value:t.kw,callback:function(n){t.kw="string"===typeof n?n.trim():n},expression:"kw"}})],1),0!==t.kw.length?e("div",{staticClass:"sugg-list"},t._l(t.suggList,(function(n,r){return e("div",{key:r,staticClass:"sugg-item",domProps:{innerHTML:t._s(n)},on:{click:t.gotoSearchResult}})})),0):e("div",{staticClass:"search-history"},[e("van-cell",{attrs:{title:"搜索历史"},scopedSlots:t._u([{key:"right-icon",fn:function(){return[e("van-icon",{staticClass:"search-icon",attrs:{name:"delete"},on:{click:function(n){t.history=[]}}})]},proxy:!0}])}),e("div",{staticClass:"history-list"},t._l(t.history,(function(n,r){return e("span",{key:r,staticClass:"history-item",on:{click:t.gotoSearchResult}},[t._v(t._s(n))])})),0)],1)])},o=[],i=e("1da1"),c=(e("96cf"),e("4de4"),e("4d63"),e("ac1f"),e("25f0"),e("159b"),e("5319"),e("2a6b")),a={name:"Search",data:function(){return{kw:"",timerId:null,suggList:[],history:JSON.parse(localStorage.getItem("history"))||[]}},mounted:function(){var t=document.querySelector("input");t.focus()},methods:{onInput:function(){var t=this;clearTimeout(this.timerId),0!==this.kw.length?this.timerId=setTimeout((function(){t.initSuggList()}),500):this.suggList=[]},initSuggList:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var e,r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(c["a"])(t.kw);case 2:e=n.sent,r=e.data,"OK"===r.message&&(t.hlightKeywords(r.data.options),t.suggList=r.data.options,o=t.history.filter((function(n){return n!==t.kw})),o.unshift(t.kw),t.history=o);case 5:case"end":return n.stop()}}),n)})))()},hlightKeywords:function(t){var n=new RegExp(this.kw,"ig");t.forEach((function(e,r){t[r]=e.replace(n,(function(t){return'<span style="color: red; font-weight: bold;">'.concat(t,"</span>")}))}))},gotoSearchResult:function(t){this.$router.push("/search/"+t.currentTarget.innerText)}},watch:{history:function(t){localStorage.setItem("history",JSON.stringify(t))}}},s=a,u=(e("510b"),e("2877")),f=Object(u["a"])(s,r,o,!1,null,"d39cf964",null);n["default"]=f.exports}}]);
//# sourceMappingURL=chunk-e77cf67c.017d8ede.js.map