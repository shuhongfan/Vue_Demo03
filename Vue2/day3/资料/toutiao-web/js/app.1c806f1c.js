(function(e){function t(t){for(var r,a,u=t[0],i=t[1],s=t[2],f=0,l=[];f<u.length;f++)a=u[f],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&l.push(o[a][0]),o[a]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);p&&p(t);while(l.length)l.shift()();return c.push.apply(c,s||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,a=1;a<n.length;a++){var u=n[a];0!==o[u]&&(r=!1)}r&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o={app:0},c=[];function u(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-07f027e9":"75aab632","chunk-2d0e9709":"fc7b405b","chunk-31441b5d":"32bc0e39","chunk-536f10e3":"a802a908","chunk-71e80b7c":"cc2e7b00","chunk-0b829cad":"0de9f417","chunk-68dab176":"61aaf05f","chunk-e2daa5a8":"60ee3dfa","chunk-e77cf67c":"017d8ede","chunk-fc83254a":"d1ba1cb5"}[e]+".js"}function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-07f027e9":1,"chunk-31441b5d":1,"chunk-536f10e3":1,"chunk-71e80b7c":1,"chunk-0b829cad":1,"chunk-68dab176":1,"chunk-e2daa5a8":1,"chunk-e77cf67c":1,"chunk-fc83254a":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-07f027e9":"9928bffd","chunk-2d0e9709":"31d6cfe0","chunk-31441b5d":"5c8ef4f7","chunk-536f10e3":"9dcc1ed0","chunk-71e80b7c":"38151330","chunk-0b829cad":"94cc4237","chunk-68dab176":"edd828ba","chunk-e2daa5a8":"9c0374b7","chunk-e77cf67c":"07cfd75e","chunk-fc83254a":"8ae92c80"}[e]+".css",o=i.p+r,c=document.getElementsByTagName("link"),u=0;u<c.length;u++){var s=c[u],f=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(f===r||f===o))return t()}var l=document.getElementsByTagName("style");for(u=0;u<l.length;u++){s=l[u],f=s.getAttribute("data-href");if(f===r||f===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||o,c=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=r,delete a[e],p.parentNode.removeChild(p),n(c)},p.href=o;var d=document.getElementsByTagName("head")[0];d.appendChild(p)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var c=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=c);var s,f=document.createElement("script");f.charset="utf-8",f.timeout=120,i.nc&&f.setAttribute("nonce",i.nc),f.src=u(e);var l=new Error;s=function(t){f.onerror=f.onload=null,clearTimeout(p);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",l.name="ChunkLoadError",l.type=r,l.request=a,n[1](l)}o[e]=void 0}};var p=setTimeout((function(){s({type:"timeout",target:f})}),12e4);f.onerror=f.onload=s,document.head.appendChild(f)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],f=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var p=f;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"2f83":function(e,t){e.exports=popmotion},3089:function(e,t){e.exports=vant},"3e37":function(e,t,n){},4360:function(e,t,n){"use strict";var r=n("1da1"),a=(n("96cf"),n("8bbf")),o=n.n(a),c=n("5880"),u=n.n(c),i=n("f17b");o.a.use(u.a);var s={tokenInfo:{token:"",refresh_token:""},userInfo:{},userProfile:{}},f=localStorage.getItem("state");null!==f&&(s=JSON.parse(f)),t["a"]=new u.a.Store({state:s,mutations:{updateTokenInfo:function(e,t){e.tokenInfo=t,localStorage.setItem("state",JSON.stringify(e))},updateUserInfo:function(e,t){e.userInfo=t,localStorage.setItem("state",JSON.stringify(e))},cleanState:function(e){e.tokenInfo={},e.userInfo={},e.userProfile={},localStorage.setItem("state",JSON.stringify(e))},updateUserProfile:function(e,t){e.userProfile=t,localStorage.setItem("state",JSON.stringify(e))}},actions:{initUserInfo:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["a"])();case 2:n=t.sent,r=n.data,"OK"===r.message&&e.commit("updateUserInfo",r.data);case 5:case"end":return t.stop()}}),t)})))()},initUserProfile:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["b"])();case 2:n=t.sent,r=n.data,"OK"===r.message&&e.commit("updateUserProfile",r.data);case 5:case"end":return t.stop()}}),t)})))()}},getters:{avatar:function(e){return e.userInfo.photo||"https://img.yzcdn.cn/vant/cat.jpeg"}},modules:{}})},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("4de4");var r=n("8bbf"),a=n.n(r),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("keep-alive",[n("router-view")],1)],1)},c=[],u={name:"App",data:function(){return{}}},i=u,s=(n("aa15"),n("2877")),f=Object(s["a"])(i,o,c,!1,null,"4caecc00",null),l=f.exports,p=n("a18c"),d=n("4360"),h=n("3089"),b=n.n(h),m=(n("833e"),n("5cfb"),n("6e85")),k=n.n(m),g=n("4208"),v=n.n(g),y=n("a471"),w=n.n(y);k.a.extend(v.a),k.a.locale(w.a),a.a.use(b.a),a.a.use(h["Lazyload"]),a.a.filter("dateFormat",(function(e){return k()().to(e)})),a.a.config.productionTip=!1,new a.a({router:p["a"],store:d["a"],render:function(e){return e(l)}}).$mount("#app")},5880:function(e,t){e.exports=Vuex},6389:function(e,t){e.exports=VueRouter},"6e85":function(e,t){e.exports=dayjs},"8bbf":function(e,t){e.exports=Vue},a18c:function(e,t,n){"use strict";n("d3b7"),n("3ca3"),n("ddb0");var r=n("8bbf"),a=n.n(r),o=n("6389"),c=n.n(o),u=n("4360"),i=function(){return n.e("chunk-07f027e9").then(n.bind(null,"7101"))},s=function(){return n.e("chunk-2d0e9709").then(n.bind(null,"8e17"))},f=function(){return Promise.all([n.e("chunk-71e80b7c"),n.e("chunk-68dab176")]).then(n.bind(null,"ed00"))},l=function(){return n.e("chunk-31441b5d").then(n.bind(null,"b88a"))},p=function(){return n.e("chunk-e77cf67c").then(n.bind(null,"cb80"))},d=function(){return Promise.all([n.e("chunk-71e80b7c"),n.e("chunk-0b829cad")]).then(n.bind(null,"ae62"))},h=function(){return n.e("chunk-e2daa5a8").then(n.bind(null,"4bad"))},b=function(){return n.e("chunk-536f10e3").then(n.bind(null,"62e3"))},m=function(){return n.e("chunk-fc83254a").then(n.bind(null,"5c2b"))},k=c.a.prototype.push;c.a.prototype.push=function(e,t,n){return t||n?k.call(this,e,t,n):k.call(this,e).catch((function(e){return e}))},a.a.use(c.a);var g=[{path:"/login",component:i,name:"login"},{path:"/",component:s,children:[{path:"",component:f,name:"home",meta:{isRecord:!0,top:0}},{path:"user",component:l,name:"user"}]},{path:"/search",component:p,name:"search"},{path:"/search/:kw",component:d,name:"search-result",props:!0,meta:{isRecord:!0,top:0}},{path:"/article/:id",component:h,name:"art-detail",props:!0,meta:{isRecord:!0,top:0}},{path:"/user/edit",component:b,name:"user-edit"},{path:"/chat",component:m,name:"chat"}],v=new c.a({routes:g});v.beforeEach((function(e,t,n){if("/user"===e.path||"/user/edit"===e.path){var r=u["a"].state.tokenInfo.token;r?n():n("/login?pre="+e.fullPath)}else n()})),v.afterEach((function(e,t){e.meta.isRecord&&a.a.nextTick((function(){window.scrollTo(0,e.meta.top)}))})),t["a"]=v},a48d:function(e,t){e.exports=io},aa15:function(e,t,n){"use strict";n("3e37")},b775:function(e,t,n){"use strict";var r=n("1da1"),a=(n("96cf"),n("d3b7"),n("ac1f"),n("5319"),n("cebe")),o=n.n(a),c=n("3089"),u=n("4360"),i=n("a18c"),s="http://www.liulongbin.top:8000",f=o.a.create({baseURL:s});f.interceptors.request.use((function(e){c["Toast"].loading({message:"加载中...",duration:0});var t=u["a"].state.tokenInfo.token;return t&&(e.headers.Authorization="Bearer "+t),e}),(function(e){return c["Toast"].clear(),Promise.reject(e)})),f.interceptors.response.use((function(e){return c["Toast"].clear(),e}),function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c["Toast"].clear(),n=u["a"].state.tokenInfo.refresh_token,401!==t.response.status||!n){e.next=16;break}return e.prev=3,e.next=6,o()({method:"PUT",url:s+"/v1_0/authorizations",headers:{Authorization:"Bearer "+n}});case 6:return r=e.sent,a=r.data,u["a"].commit("updateTokenInfo",{token:a.data.token,refresh_token:n}),e.abrupt("return",f(t.config));case 12:e.prev=12,e.t0=e["catch"](3),u["a"].commit("cleanState"),i["a"].replace("/login?pre="+i["a"].currentRoute.fullPath);case 16:return e.abrupt("return",Promise.reject(t));case 17:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}()),t["a"]=f},cebe:function(e,t){e.exports=axios},f17b:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return i}));var r=n("b775"),a=function(e){return r["a"].post("/v1_0/authorizations",e)},o=function(){return r["a"].get("/v1_0/user")},c=function(){return r["a"].get("/v1_0/user/profile")},u=function(e){return r["a"].patch("/v1_0/user/profile",e)},i=function(e){return r["a"].patch("/v1_0/user/photo",e)}},f4e8:function(e,t){e.exports=hljs}});
//# sourceMappingURL=app.1c806f1c.js.map